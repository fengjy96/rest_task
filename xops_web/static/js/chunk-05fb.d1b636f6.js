(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-05fb"],{"9NiC":function(e,t,a){"use strict";a.r(t);var n=a("FplJ"),i=a("KglX"),o=a("PL5b"),l=a("g8L3"),s=a("ySi6"),c=a("wd/R"),d=a.n(c),r={name:"step_file_table",components:{Feedback:i.a,image_preview:o.a,rte_preview:l.a,step_file_preview:n.default},props:{files:{type:Array,default:function(){return[]}}},data:function(){return{expands:[],actives:[],feedbacks:[]}},methods:{handlePreview:function(e){this.actives=["1"],this.expands=[e.id]},handleViewFeedback:function(e){this.actives=["3"],this.expands=[e.id],this.getFeedbackLog(e)},getRowKeys:function(e){return e.id},handleExpandChange:function(e,t){var a=this;t.length>1&&this.files.forEach(function(t){t.id!==e.id&&a.$refs.tables.toggleRowExpansion(t,!1)})},handleRowClick:function(e,t,a){this.actives=[],this.$refs.tables.toggleRowExpansion(e),this.getFeedbackLog(e)},getFeedbackLog:function(e){var t=this;Object(s.d)({file_id:e.id,type:e.type}).then(function(e){200===e.code&&e.detail?t.feedbacks=t.formatFeedbackData(e.detail):t.feedbacks=[]}).catch(function(e){})},formatFeedbackData:function(e){return e&&e.length>0&&e.forEach(function(e){e.title=e.title||"",e.memo=e.memo||"",e.content=e.content||"",e.add_time=e.add_time?d()(e.add_time).format("YYYY-MM-DD hh:mm:ss"):"",e.files&&e.files.length>0&&e.files.forEach(function(e){e.path=e.path?"http://192.168.239.129"+e.path:e.path,e.type_name=e.content?"富文本":"图片",e.add_time=e.add_time?d()(e.add_time).format("YYYY-MM-DD hh:mm:ss"):"",e.name=e.name||"-"})}),e}}},f=(a("Cap/"),a("KHd+")),p=Object(f.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{ref:"tables",staticStyle:{width:"100%"},attrs:{border:"","highlight-current-row":"",size:"small",fit:"",data:e.files,"expand-row-keys":e.expands,"row-key":e.getRowKeys},on:{"expand-change":e.handleExpandChange,"row-click":e.handleRowClick}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("step_file_preview",{attrs:{feedbacks:e.feedbacks,actives:e.actives,file:t.row},on:{getFeedbackLog:e.getFeedbackLog}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"文件名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type_name",label:"类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"add_time",label:"提交时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){a.stopPropagation(),e.handlePreview(t.row)}}},[e._v("预览")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){a.stopPropagation(),e.handleViewFeedback(t.row)}}},[e._v("查看反馈")])]}}])})],1)],1)},[],!1,null,"237f15d8",null);p.options.__file="step_file_table.vue";t.default=p.exports},"Cap/":function(e,t,a){"use strict";var n=a("QTdk");a.n(n).a},QTdk:function(e,t,a){}}]);